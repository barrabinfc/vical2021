---
import BaseLayout from '~/layouts/base.astro';
import Card from '~/components/Card/Card'
import Work from './work/work.tsx';

import {getAllProjects} from './work'

export async function createCollection(){
  const works = await getAllProjects();

  return {
    route: `/work/:slug`,
    paths() {
      return works.map( work => ({params: work}) )
    },
    async props({params}) {
      return {
        ...params,
        content: {
          title: params.content.title,
          description: params.content.description,
          schema: 'article'
        }
      };
    }
  }
}

---
<!DOCTYPE html>
<BaseLayout ...Astro.props>
  <article id="content">
    <Work ...props loading="eager" />
  </article>
</BaseLayout>
